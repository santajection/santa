# サンタジェクション
サンタが壁を登ります！

## コンセプト
今日はクリスマス．

子どもたちとってはとってもとっても大事な日．

みんなサンタさんからプレゼントを貰うのを楽しみに待っている．

それなのにうっかり者のサンタさん達はお寝坊しちゃったみたい．

みんな，お寝坊なサンタを応援してサンタさんを壁の上のソリまで連れって行ってあげよう！！

## 開発

### 環境
- Chrome
- Node.js
- [hub](https://github.com/santajection/hub)

### リポジトリのクローン

```
git clone git@github.com:santajection/santa.git
```

### 設定
[hub](https://github.com/santajection/hub)のURLを`config.default.json`に書き込む。
デフォルトではlocalhost:3001(hubの初期値)に設定されている。
```
{
  "hubserver": "localhost:3001"
}
```

### パッケージインストール

```
cd santa
npm install
```

 ### 起動
注：hubが起動されていて接続できる状態にあること。
```
npm start
```

## 運営
### URL
`localhost:3000`をこのサービスを動かしているサーバのURLと読み替える。
- ゲーム画面: http://localhost:3000
- 運営画面： http://localhost:3000/unnei

### ルール
- 時間は30秒
- スマホを振ってサンタを登らせる
- 途中で出て来るトナカイにぶつかると落ちちゃうから避けてね

### 運営画面
`http://localhost:3000/unnei`の各項目を説明する。

#### サンタコントローラー
- q、w、e、rを押すと、赤、青、黄、緑の各サンタが一定確率で登る。下手な人はこれでサポートしてあげる

#### ゲームの進行
- ボタンを押すと画面が切り替わる
- タイトルや、ルールの説明など進行に合わせて切り替える
- ゲームを始める前に「初期状態」にして、「ゲームスタート」をしてゲームを開始する

#### 状態変更
- 複数回ゲームをするときに、各ゲームにはゲームidを設定する
- ゲームid毎にユーザーがアクセスするURLも違う
- 今から始めるゲームidを記入し、ゲーム受付開始ボタンを押す
- そうするとユーザーは（スマホから）参加できる状態になる
- モバイルにメッセージを送るは未実装

#### 開発用コマンド
本番のときには必要なし。
ゲーム内容のプレゼンや、ゲームの簡単な動作確認に使う。

- 強制時間切れ：ゲーム途中でも、強制的に時間切れにし、ゲームエンディングアニメーションを表示させる
- サンタ追加、画面が「初期状態」にあるとき、ダミーのサンタをゲーム画面に追加する
- 他は未実装

#### サンタの名前
- 登場シーンの確認をする
- テキストボックスに名前を入れて、登場ボタンを押すと入力された名前が表示されたサンタが登場してくる

## その他・注意事項
- ゲーム画面のロードには画像10MBほどダウンロードします．環境によっては時間がかかるかも．
- 複数回ゲームをするとき、新しいゲームをするときにはゲーム画面、運営画面両方ブラウザのリロードをする（あまり、テストされていないので、毎回新しい状態にすることで未知のバグに遭遇しないようにする）
- 画像を全て読み込んだのを確認してからゲーム画面に移るので，何かが原因で画像が読み込めなかったら永遠にゲーム画面に到達しないかも．
- 画面遷移や登場，ゲームスタートなどのボタンを連打すると変な動作をするかも．
